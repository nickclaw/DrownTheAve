doctype html
html
    head
        title #{special.name}

    body
        h2 #{special.id} - #{special._bar_id.name}
        a(href="/admin/special") back

        form(method="POST" action="")
            label start
            input(name="start")
            br

            label end
            input(name="end")
            br

            label deal
            textarea(name="deal")
            br

            each date in special.dates
                label year
                input(name="year")
                label month
                input(name="month")
                label date
                input(name="date")
                label day
                input(name="day")
                a(href="#" class="delete") -
                br

            a(href="#" class="add") +

            input(type="submit" value="edit"0)

            script.
                window.addEventListener('load', function() {
                    document.body.addEventListener('click', function(evt) {
                        if (evt.target.tagName !== 'A') return;

                        if (evt.target.classList.contains('add')) {
                            evt.preventDefault();
                            evt.target.insertAdjacentHTML('beforebegin', '<label>year</label><input name="year" /><label>month</label><input name="month" /><label>date</label><input name="date" /><label>day</label><input name="day" /><a href="#" class="delete">-</a><br />');
                        } else if (evt.target.classList.contains('delete')) {
                            evt.preventDefault();
                            var form = document.querySelector('form');
                            for (var i = 0; i < 8; i++) {
                                form.removeChild(evt.target.previousSibling);
                            }
                            form.removeChild(evt.target.nextSibling);
                            form.removeChild(evt.target);
                        }
                    });
                });
